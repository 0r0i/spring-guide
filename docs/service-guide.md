# Service Guide

도메인 레이어는 모든 레이어에서 사용됩니다. 이 때문에 자기 자신의 책임을 충분히 다하지 않으면 많은 영역에서 그 책임을 넘겨받게 됩니다. 이번에는 이 내용을 중심으로 포스팅을 진행하겠습니다.

## 서비스 레이어란 ?

![](https://image.slidesharecdn.com/random-151127092631-lva1-app6892/95/-60-638.jpg?cb=1448755823)
> 이미지 출저 [애플리케이션 아키텍처와 객체지향](https://www.slideshare.net/baejjae93/ss-55571345)

우리는 Member라는 객체로 회원가입(객채 생성), 프로필수정(객체 수정)모든 행위가 가능하지만 그것을 영속화 시켜야하기 때문에 별도의 레이어가 필요하고 이것을 서비스 레이어라고 합니다. 서비스 레이어에서는 대표적으로 데이터베이스에 대한 트랜잭션을 관리합니다. 

서비스 영역는 도메인의 핵심 비지니스 코드를 담당하는 영역이 아니라 인프라스트럭처(데이터베이스) 영역과 도메인영역을 연결해주는 매개체 역할이라고 생각합니다. 

**다시 한번 강조하지만 Member 객체에 대한 제어는 Member 스스로 제어해야합니다.**



## 서비스의 적절한 책임의 크기 부여하기

책임이란 것은 외부 객체의 요청에대한 응답이라고 생각합니다. **이러한 책임들이 모여 역할이 되고 역할은 대체 가능성을 의미합니다.** 그렇기 때문에 대체가 가능할 정도의 적절한 크기를 가져야합니다. 이 부분은 아래의 예제로 천천히 설명드리겠습니다.

### 행위 기반으로 네이밍 하기

서비스의 책임의 크기를 잘 부여하는 방법중에 가장 쉬운 방법이라고 생각합니다. 행위 기반으로 서비스를 만드는 것입니다.

`MemberService`라는 네이밍은 많이 사용하지만 정말 좋지 않은 패턴이라고 생각합니다. 우선 해당 클래스의 책임이 분명하지 않아서 모든 로직들이 `MemberService` 으로 모이게 될것입니다. 그 결과 외부 객체에서는  `MemberSerivce` 객체를 의존하게 됩니다. findById 메서드 하나를 사용하고 싶어도 `MemberSerivce`를 주입 받아야합니다. `MemberSerivce` 구현도 본인이 모든 구현을 하려고 하니 메서드의 라인수도 방대해집니다. 테스트 코드 작성하기도 더욱 어렵게 만들어집니다.

Member에 대한 조회 전용 서비스 객체인 `MemberFindSetvice`으로 네이밍을하면 자연스럽게 객체의 책임이 부여됩니다. **객체를 행위 기반으로 바라 보고 행위 기반으로 네이밍을 주어 자연스럽게 책임을 부여하는 것이 좋습니다.**

### 역할은 대체 가능성을 의미

> 책임이란 것은 외부 객체의 요청에대한 응답이라고 생각합니다. **이러한 책임들이 모여 역할이 되고 역할은 대체 가능성을 의미합니다.** 

위에서 언급한 말을 매우 과격하게 표현하면 아래와 같습니다.

> 메서드(책임)란 것은 외부 객체의 호출에 대한 응답이고, 이러한 메서드(책임)들이 모여 클래스(역할) 클래스는 인터페이스(대체 가능성)을 의미합니다.











